var route = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{},"geometry":{"type":"LineString","coordinates":[[-77.45288372039795,37.53394322021102],[-77.45178937911987,37.53404531478695],[-77.45039463043213,37.53414740922313],[-77.4492359161377,37.53426651922202],[-77.44936466217041,37.53343274523484],[-77.44966506958008,37.532479849264014],[-77.45005130767822,37.53142484309493],[-77.4506950378418,37.53137379403081],[-77.45110273361206,37.53108451534079],[-77.45125293731688,37.530693136503785],[-77.4517035484314,37.53064208693886],[-77.45228290557861,37.530574020797914],[-77.45331287384033,37.53030175561308],[-77.45419263839722,37.52991037266868],[-77.45515823364258,37.5294339037036],[-77.45601654052734,37.52890638094201],[-77.4568748474121,37.528344820354306],[-77.45711088180542,37.5280555299168],[-77.45711088180542,37.52766413518615],[-77.4567461013794,37.527272738401855],[-77.4560809135437,37.52717063455515],[-77.45535135269165,37.52756203187517],[-77.45492219924927,37.52773220398245],[-77.45442867279053,37.527970444280484],[-77.45408535003662,37.5280385127973],[-77.45408535003662,37.52773220398245],[-77.45402097702026,37.527340807555326],[-77.45369911193848,37.52749396292356],[-77.45369911193848,37.52769816959207],[-77.45382785797119,37.527919392852084],[-77.45389223098753,37.52815763255225],[-77.45333433151245,37.528378854449656],[-77.45275497436523,37.52875322847373],[-77.45221853256226,37.52904251620539],[-77.45174646377563,37.528957431694884],[-77.45159626007079,37.5287362115134],[-77.45161771774292,37.52822570089826],[-77.45191812515257,37.527953427141554],[-77.45239019393921,37.52793640999878],[-77.45269060134888,37.527953427141554],[-77.45284080505371,37.52766413518615],[-77.45339870452881,37.52679625258826],[-77.45367765426636,37.52611555328928],[-77.4529480934143,37.52645590371518],[-77.45230436325073,37.526830287390176],[-77.4510383605957,37.52715361723378],[-77.44981527328491,37.527459928424456],[-77.44895696640013,37.52768115239103],[-77.44844198226929,37.5280385127973],[-77.4481201171875,37.52825973504798],[-77.44709014892578,37.52883831321715],[-77.44625329971313,37.52909356686508],[-77.44556665420532,37.52926373547845],[-77.44462251663208,37.529331802815086],[-77.44412899017334,37.52979125571275],[-77.44337797164916,37.52980827243238],[-77.44290590286255,37.52951898767058],[-77.44243383407593,37.528889364016614],[-77.4419617652893,37.528344820354306],[-77.44142532348633,37.5280555299168],[-77.4407172203064,37.52757904910339],[-77.43973016738892,37.527034495875505],[-77.43867874145508,37.52684730478531],[-77.43743419647217,37.52684730478531],[-77.43591070175171,37.526728182937866],[-77.4351167678833,37.52662607834584],[-77.43488073348999,37.52715361723378],[-77.43393659591675,37.529672138566575],[-77.43307828903198,37.532156542507806],[-77.43286371231078,37.53280315461874],[-77.43316411972046,37.532956298771296],[-77.43393659591675,37.532786138582395],[-77.43453741073608,37.53285420270453],[-77.43533134460449,37.533296617984405],[-77.43625402450562,37.53397725175185],[-77.43655443191528,37.533994267516455],[-77.43700504302979,37.53394322021102],[-77.43713378906249,37.533483792889676],[-77.43854999542236,37.53343274523484],[-77.44035243988037,37.53361991979847],[-77.44148969650269,37.53404531478695],[-77.44299173355103,37.534419660369636],[-77.4432921409607,37.534708926123805],[-77.44369983673094,37.53475997290511],[-77.44421482086182,37.53462384807727],[-77.44460105895996,37.53450473864907],[-77.44485855102539,37.534930128590524],[-77.4457597732544,37.53474295731523],[-77.446768283844,37.534521754293344],[-77.44769096374512,37.53438562903068],[-77.44848489761353,37.53433458199311]]}}]};

window.onload = function() {

  mapboxgl.accessToken = 'pk.eyJ1IjoibWFwc2FtIiwiYSI6ImNpaWR1MXlxcDAxMTJ1M2tzYWUyeTdpY24ifQ.QG1jCTgj-WYwJa2y1W0wMw';

  var map = new mapboxgl.Map({
    container: 'adventure',
    style: 'mapbox://styles/mapsam/cikg2spcb001d9sm69lo7bhpz',
    center: [-77.443281, 37.531235],
    zoom: 14
  });

  map.scrollZoom.disable();

  // add the route
  map.on('load', function() {
    map.addSource("route", {
      type: "geojson",
      data: route
    });
    map.addLayer({
      "id": "route",
      "type": "line",
      "source": "route",
      "layout": {
        "line-join": "round",
        "line-cap": "round"
      },
      "paint": {
        "line-color": "#8a8acb",
        "line-width": 4
      }
    });

    map.addSource("points", {
      "type": "geojson",
      "data": {
        "type": "FeatureCollection",
        "features": [{
          "type": "Feature",
          "geometry": {
            "type": "Point",
            "coordinates": [-77.45288372039795, 37.53394322021102]
          },
          "properties": {
            "title": "Start",
            "icon": "rocket"
          }
        }, {
          "type": "Feature",
          "geometry": {
            "type": "Point",
            "coordinates": [-77.44848489761353,37.53433458199311]
          },
          "properties": {
            "title": "Finish",
            "icon": "embassy"
          }
        }]
      }
    });

    map.addLayer({
      "id": "points",
      "type": "symbol",
      "source": "points",
      "layout": {
        "icon-image": "{icon}-15",
        "text-field": "{title}",
        "text-font": ["Open Sans Semibold", "Arial Unicode MS Bold"],
        "text-offset": [0, -0.7],
        "text-anchor": "bottom"
      }
    });
  });

};

// $(document).ready(function(){

//   L.mapbox.accessToken = 'pk.eyJ1Ijoic3ZtYXR0aGV3cyIsImEiOiJVMUlUR0xrIn0.NweS_AttjswtN5wRuWCSNA';
//   var map = L.mapbox.map('adventure', 'mapbox.streets');
//   map.setView([, ], 15)
//     .featureLayer.setGeoJSON(route);

//   // start
//   L.mapbox.featureLayer({
//     type: 'Feature',
//     geometry: {
//       type: 'Point',
//       coordinates: [
//         -77.45288372039795, 37.53394322021102
//       ]
//     },
//     properties: {
//       title: 'Start',
//       'marker-color': '#2ECC40'
//     }
//   }).addTo(map);

//   // finish
//   L.mapbox.featureLayer({
//     type: 'Feature',
//     geometry: {
//       type: 'Point',
//       coordinates: [
//         -77.44848489761353,37.53433458199311
//       ]
//     },
//     properties: {
//       title: 'Finish',
//       'marker-color': '#FF4136'
//     }
//   }).addTo(map);
// });
